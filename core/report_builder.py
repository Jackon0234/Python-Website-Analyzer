class ReportBuilder:
    def build_telegram_report(self, data: dict) -> str:
        if "error" in data:
            return f"âš ï¸ <b>Analiz HatasÄ±:</b>\n{data['error']}"

        whois_text = ""
        if data['whois']:
            w = data['whois']
            reg = str(w.get('registrar', 'Gizli'))
            if reg == "None": reg = "Gizli"
            whois_text = (
                f"ğŸ¢ <b>Firma:</b> {reg[:25]}\n"
                f"ğŸ“… <b>KayÄ±t:</b> {w.get('creation_date', '-')}\n"
                f"â³ <b>BitiÅŸ:</b> {w.get('expiration_date', '-')}"
            )
        else:
            whois_text = "ğŸš« <i>Whois verisi Ã§ekilemedi.</i>"

        ssl_text = ""
        if data['ssl'] and data['ssl']['secure']:
            s = data['ssl']
            icon = "ğŸŸ¢" if s['days_left'] > 30 else "ğŸ”´"
            ssl_text = (
                f"{icon} <b>Sertifika:</b> {s['issuer'][:25]}\n"
                f"ğŸ“… <b>BitiÅŸ:</b> {s['valid_until']} ({s['days_left']} gÃ¼n)"
            )
        else:
            ssl_text = "âŒ <b>SSL:</b> GÃ¼venli DeÄŸil"

        seo = data['seo']
        speed_icon = "ğŸš€" if seo['speed'] < 1.0 else "ğŸ¢"
        seo_text = (
            f"{speed_icon} <b>Tepki SÃ¼resi:</b> {seo['speed']} sn\n"
            f"ğŸ·ï¸ <b>Title:</b> {seo['title'][:35]}\n"
            f"ğŸ“ <b>Desc:</b> {seo['description']}\n"
            f"ğŸ“Œ <b>H1:</b> {seo['h1']}"
        )

        plugins_list = ""
        if data['plugins']:
            limit = 5
            p_names = [f"â€¢ {p}" for p in data['plugins'][:limit]]
            if len(data['plugins']) > limit:
                p_names.append(f"<i>...ve {len(data['plugins'])-limit} daha</i>")
            plugins_list = "\n".join(p_names)
        else:
            plugins_list = "â€¢ <i>Eklenti izi yok</i>"

        theme_info = data['theme'] if data['theme'] != "Not Detected" else "<i>Ã–zel / Gizli</i>"

        report = (
            f"ğŸ“¡ <b>X-RAY FULL AUDIT RAPORU</b>\n"
            f"ğŸ”— <b>Hedef:</b> <code>{data['domain'].upper()}</code>\n"
            f"â–â–â–â–â–â–â–â–â–â–\n\n"
            f"ğŸŒ <b>DOMAIN BÄ°LGÄ°LERÄ°</b>\n"
            f"{whois_text}\n\n"
            f"âš¡ <b>PERFORMANS & SEO</b>\n"
            f"{seo_text}\n\n"
            f"ğŸ”’ <b>GÃœVENLÄ°K</b>\n"
            f"{ssl_text}\n"
            f"ğŸ›¡ï¸ <b>Koruma:</b> {', '.join(data['security'])}\n\n"
            f"ğŸ—ï¸ <b>TEKNÄ°K ALTYAPI</b>\n"
            f"ğŸ–¥ï¸ <b>Server:</b> {data['server']}\n"
            f"âš™ï¸ <b>Sistem:</b> {data['cms']}\n"
            f"ğŸ¨ <b>Tema:</b> {theme_info}\n\n"
            f"ğŸ”Œ <b>TESPÄ°T EDÄ°LEN EKLENTÄ°LER</b>\n"
            f"{plugins_list}\n\n"
            f"â–â–â–â–â–â–â–â–â–â–\n"
            f"ğŸ¤– <i>Generated by JACKON</i>"
        )
        return report